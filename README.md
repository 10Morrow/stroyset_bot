**Инструкция по сборке запуске и работе
с кодом телеграмм бота компании СтройСеть.**

1. Бот может быть запущен как пайтон проект,
а так же внутри Docker контейнера. 
Последний способ не требует установки Python
на целевую машину.


1.1 **Обязательные условия для запуска:**

создайте .env файл со следующим содержимым.
BOT_TOKEN = <токен ТГ бота полученный в @BotFather>

PAY_SYS_NAME = <логин от личного кабинета платежной системы>

PAY_SYS_PASS = <пароль от личного кабинета платежной системы>

API_TOKEN = <токен подключения к сайту>


1.2 Установка с использованием Docker.
Для запуска понадобится сам Docker,
а так же docker-compose

находясь в корневой папке проекта запустите команду:
**docker-compose up**
добавьте флаг **-d** для скрытого запуска.

Докер будет перезапускать бота автоматически,
локальная база данных бота сброшена не будет.


1.3 Запуск бота как пайтон проект.
У вас должен быть установлен Python и pip

Создайте и активируйте виртуальное окружение

**python3 -m venv venv**

**source venv/bin/activate**

теперь установите все библиотеки командой:

**pip3 install -r requirements.txt**

после вы можете запустить бота командой:

**python3 bot.py**


**2. Как устроен телеграмм бот**

-в папке **api** лежит файл для взаимодействия с api вебсайта

-в папке **data** хванится локальная база данных

-в папке **database** находятся файлы отвечающие
за взаимодействие с локальной БД

-в папке **forms** есть несколько файлов отвечающих за
создание форм для сбора данных пользователей, таких
как форма регистрации, выбора строителя/заказчика,
 подписки на категории и др.

-в **handlers** находятся все обработчики действий
пользователей.

-в  **keyboards** лежит код всех клавиатур бота.

-в **logs** есть файл для управления и настроки логов,
если таковые потребуются.

-в **payment** лежит код для работы с api платежной системы.
